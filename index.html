
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tu Tiên: Môn Phái & Kỹ Năng</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #000;
      color: #fff;
    }
    .screen {
      display: none;
      padding: 20px;
      text-align: center;
    }
    .active {
      display: block;
    }
    #map {
      background: url('https://i.imgur.com/1qOTvGJ.jpg') no-repeat center center;
      background-size: cover;
      height: 70vh;
      position: relative;
    }
    .zone {
      position: absolute;
      border: 2px solid #ffd700;
      border-radius: 10px;
      padding: 10px;
      background-color: rgba(0,0,0,0.5);
      cursor: pointer;
      color: white;
    }
    #fightLog {
      margin-top: 20px;
      color: #00ffcc;
      font-weight: bold;
    }
    .btn {
      padding: 10px 20px;
      background-color: #4CAF50;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin: 10px;
    }
    .skill-btn {
      background-color: #2196F3;
    }
    .monster {
      font-size: 32px;
      animation: shake 0.4s ease-in-out infinite alternate;
    }
    @keyframes shake {
      from { transform: translateX(-3px); }
      to { transform: translateX(3px); }
    }
    select {
      padding: 10px;
      font-size: 16px;
      border-radius: 5px;
    }
  </style>

<audio id="swordSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_327894c3b8.mp3"></audio>
<audio id="fireballSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_66b7b3b3f7.mp3"></audio>
<audio id="punchSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_aaddb28945.mp3"></audio>
</head>
<body>

<div id="startScreen" class="screen active">
  <h1>🌌 Tu Tiên: Lựa Chọn Môn Phái 🌌</h1>
  <p>Nhập tên nhân vật:</p>
  <input type="text" id="charName" placeholder="Tên đạo hữu..." /><br><br>
  <p>Chọn môn phái:</p>
  <select id="charClass">
    <option value="Kiếm Tu">⚔️ Kiếm Tu</option>
    <option value="Pháp Tu">🔮 Pháp Tu</option>
    <option value="Thể Tu">💪 Thể Tu</option>
  </select><br><br>
  <button class="btn" onclick="createCharacter()">Bắt đầu</button>
</div>

<div id="mapScreen" class="screen">
  <h2>👤 <span id="playerName"></span> - <span id="playerClass"></span></h2>
  
  <div id="map" style="position:relative;">
    <img src="https://i.imgur.com/1qOTvGJ.jpg" style="position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:0;" />
    <img src="https://i.imgur.com/7hD2gtr.png" id="playerSprite" style="position:absolute; top:45%; left:35%; width:60px; z-index:1;" />

    <div class="zone" style="top: 20%; left: 10%;" onclick="enterZone('Rừng Linh Thú')">Rừng Linh Thú</div>
    <div class="zone" style="top: 50%; left: 40%;" onclick="enterZone('Động Băng Tinh')">Động Băng Tinh</div>
    <div class="zone" style="top: 70%; left: 75%;" onclick="enterZone('Đỉnh Hư Không')">Đỉnh Hư Không</div>
  </div>

  <div>
    <h3>Kỹ năng môn phái:</h3>
    <button class="btn skill-btn" onclick="useSkill()">✨ Thi triển chiêu thức</button>
  </div>

  
  <div style="margin-top: 20px;">
    <div style="width: 80%; margin: 10px auto; background: #444; border-radius: 10px; height: 20px;">
      <div id="hpBar" style="height: 100%; background: red; width: 100%; border-radius: 10px;"></div>
    </div>
    <p>❤️ HP: <span id="hp">100</span>/100</p>
    <p>⭐ EXP: <span id="exp">0</span> / <span id="expMax">100</span></p>
  </div>
  <div id="fightLog"></div>

</div>

<script>
  let currentClass = "Kiếm Tu";

  function createCharacter() {
    const name = document.getElementById('charName').value.trim();
    const chosenClass = document.getElementById('charClass').value;
    if (!name) {
      alert("Hãy nhập tên nhân vật!");
      return;
    }
    localStorage.setItem("tu_tien_char", name);
    localStorage.setItem("tu_tien_class", chosenClass);
    currentClass = chosenClass;
    document.getElementById('playerName').innerText = name;
    document.getElementById('playerClass').innerText = chosenClass;
    showScreen('mapScreen');
  }

  function enterZone(zoneName) {
    const log = document.getElementById("fightLog");
    log.innerHTML = `👾 Bạn tiến vào <b>${zoneName}</b>... Một con quái vật xuất hiện!<br><br>
      <div class='monster'>💢 Quái vật gầm lên thách thức!</div>`;
  }

  function useSkill() {
    const log = document.getElementById("fightLog");
    let skillEffect = "";
    switch(currentClass) {
      case "Kiếm Tu":
        document.getElementById("swordSound").play();

      case "Kiếm Tu":
        skillEffect = "🌪️ Kiếm ảnh cuồng vũ xoáy nát quái vật!";
        break;
      case "Pháp Tu":
        document.getElementById("fireballSound").play();
        skillEffect = "🔥 Hỏa cầu thiên lôi giáng xuống!";
        break;
      case "Thể Tu":
        document.getElementById("punchSound").play();
        skillEffect = "💥 Một cú đấm trời giáng nghiền nát kẻ địch!";
        break;
      default:
        skillEffect = "✨ Chiêu thức bí ẩn được thi triển!";
    }
    log.innerHTML += `<br><br>${skillEffect}<br>🎉 Kẻ địch bị tiêu diệt!`;
  }

  function showScreen(id) {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
  }

  window.onload = () => {
    const savedName = localStorage.getItem("tu_tien_char");
    const savedClass = localStorage.getItem("tu_tien_class");
    if (savedName && savedClass) {
      currentClass = savedClass;
      document.getElementById('playerName').innerText = savedName;
      document.getElementById('playerClass').innerText = savedClass;
      showScreen('mapScreen');
    }
  }

  let hp = 100;
  let exp = 0;
  let expMax = 100;

  function updateUI() {
    document.getElementById("hp").innerText = hp;
    document.getElementById("exp").innerText = exp;
    document.getElementById("expMax").innerText = expMax;
    document.getElementById("hpBar").style.width = hp + "%";
  }

  function enterZone(zoneName) {
    const log = document.getElementById("fightLog");
    log.innerHTML = `👾 Bạn tiến vào <b>${zoneName}</b>... Một con quái vật xuất hiện!<br><br>
      <div class='monster'>💢 Quái vật gầm lên thách thức!</div>`;
    hp -= 10;
    if (hp < 0) hp = 0;
    updateUI();
    if (hp === 0) {
      log.innerHTML += "<br>☠️ Bạn đã kiệt sức! Hồi phục để tiếp tục.";
    }
  }

  function useSkill() {
    if (hp <= 0) {
      alert("Bạn không còn đủ HP để chiến đấu!");
      return;
    }
    const log = document.getElementById("fightLog");
    let skillEffect = "";
    switch(currentClass) {
      case "Kiếm Tu":
        document.getElementById("swordSound").play();

      case "Kiếm Tu":
        skillEffect = "🌪️ Kiếm ảnh cuồng vũ xoáy nát quái vật!";
        break;
      case "Pháp Tu":
        document.getElementById("fireballSound").play();
        skillEffect = "🔥 Hỏa cầu thiên lôi giáng xuống!";
        break;
      case "Thể Tu":
        document.getElementById("punchSound").play();
        skillEffect = "💥 Một cú đấm trời giáng nghiền nát kẻ địch!";
        break;
      default:
        skillEffect = "✨ Chiêu thức bí ẩn được thi triển!";
    }
    log.innerHTML += `<br><br>${skillEffect}<br>🎉 Kẻ địch bị tiêu diệt!`;

    exp += 25;
    if (exp >= expMax) {
      exp = exp - expMax;
      expMax += 25;
      log.innerHTML += "<br>🆙 Bạn đã tăng cấp!";
    }
    updateUI();
  }

  window.onload = () => {
    const savedName = localStorage.getItem("tu_tien_char");
    const savedClass = localStorage.getItem("tu_tien_class");
    if (savedName && savedClass) {
      currentClass = savedClass;
      document.getElementById('playerName').innerText = savedName;
      document.getElementById('playerClass').innerText = savedClass;
      showScreen('mapScreen');
    }
    updateUI();
  }
</script>


</body>
</html>
